<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrbiterSDK: Contract Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OrbiterSDK<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">Subnet from Sparq Labs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classContract-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Contract Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Native abstraction of a smart contract.  
 <a href="classContract.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="contract_8h_source.html">contract.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9900fa7ca93b402bf3caf140a47dd4b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#a9900fa7ca93b402bf3caf140a47dd4b6">Contract</a> (const std::string &amp;<a class="el" href="classContract.html#a7e5ede4f1a7d02d7592fa1bedf20afdc">contractName</a>, const <a class="el" href="classAddress.html">Address</a> &amp;address, const <a class="el" href="classAddress.html">Address</a> &amp;creator, const uint64_t &amp;chainId, const std::unique_ptr&lt; <a class="el" href="classDB.html">DB</a> &gt; &amp;<a class="el" href="classContract.html#a75d178038d2102c73ef5d9d1c8fa2bec">db</a>)</td></tr>
<tr class="memdesc:a9900fa7ca93b402bf3caf140a47dd4b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classContract.html#a9900fa7ca93b402bf3caf140a47dd4b6">More...</a><br /></td></tr>
<tr class="separator:a9900fa7ca93b402bf3caf140a47dd4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac98cd9ff4e8f9530e3af6ad662e25794"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#ac98cd9ff4e8f9530e3af6ad662e25794">Contract</a> (const <a class="el" href="classAddress.html">Address</a> &amp;address, const std::unique_ptr&lt; <a class="el" href="classDB.html">DB</a> &gt; &amp;<a class="el" href="classContract.html#a75d178038d2102c73ef5d9d1c8fa2bec">db</a>)</td></tr>
<tr class="memdesc:ac98cd9ff4e8f9530e3af6ad662e25794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classContract.html#ac98cd9ff4e8f9530e3af6ad662e25794">More...</a><br /></td></tr>
<tr class="separator:ac98cd9ff4e8f9530e3af6ad662e25794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962b1ae55e6b26cb0b7e8a1a4604efd4"><td class="memItemLeft" align="right" valign="top"><a id="a962b1ae55e6b26cb0b7e8a1a4604efd4" name="a962b1ae55e6b26cb0b7e8a1a4604efd4"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~Contract</b> ()</td></tr>
<tr class="memdesc:a962b1ae55e6b26cb0b7e8a1a4604efd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">All derived classes should override the destructor in order to call <a class="el" href="classDB.html" title="Abstraction of a LevelDB database.">DB</a> functions. <br /></td></tr>
<tr class="separator:a962b1ae55e6b26cb0b7e8a1a4604efd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c9e36a06ff44ac0db8aedf33ca16d8a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#a9c9e36a06ff44ac0db8aedf33ca16d8a">ethCall</a> (const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx, const uint256_t &amp;txValue)</td></tr>
<tr class="memdesc:a9c9e36a06ff44ac0db8aedf33ca16d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke a contract "payable" function using a transaction Used by the <a class="el" href="classState.html" title="Abstraction of the blockchain&#39;s state.">State</a> class when calling <code>processNewBlock()/validateNewBlock()</code> Can be overridden by child class if they need need to process the function call in a non-standard way (See <a class="el" href="classContractManager.html" title="Class that holds all current contract instances in the blockchain state.">ContractManager</a> for example)  <a href="classContract.html#a9c9e36a06ff44ac0db8aedf33ca16d8a">More...</a><br /></td></tr>
<tr class="separator:a9c9e36a06ff44ac0db8aedf33ca16d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b4e99ce117417be96c23a135996666c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#a7b4e99ce117417be96c23a135996666c">ethCall</a> (const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)</td></tr>
<tr class="memdesc:a7b4e99ce117417be96c23a135996666c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke a contract function using a transaction.  <a href="classContract.html#a7b4e99ce117417be96c23a135996666c">More...</a><br /></td></tr>
<tr class="separator:a7b4e99ce117417be96c23a135996666c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef97e051e844e0a4f0f961642510babc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#aef97e051e844e0a4f0f961642510babc">ethCall</a> (const std::tuple&lt; <a class="el" href="classAddress.html">Address</a>, <a class="el" href="classAddress.html">Address</a>, uint64_t, uint256_t, uint256_t, std::string &gt; &amp;callInfo)</td></tr>
<tr class="memdesc:aef97e051e844e0a4f0f961642510babc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke a contract function and simulate it.  <a href="classContract.html#aef97e051e844e0a4f0f961642510babc">More...</a><br /></td></tr>
<tr class="separator:aef97e051e844e0a4f0f961642510babc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a9e7c057ddcb38a7839c6df98753b5"><td class="memItemLeft" align="right" valign="top">virtual const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#a93a9e7c057ddcb38a7839c6df98753b5">ethCall</a> (const std::string &amp;data) const</td></tr>
<tr class="separator:a93a9e7c057ddcb38a7839c6df98753b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae58d421bc5e403c763fa4cf0885e80d"><td class="memItemLeft" align="right" valign="top"><a id="aae58d421bc5e403c763fa4cf0885e80d" name="aae58d421bc5e403c763fa4cf0885e80d"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getContractName</b> () const</td></tr>
<tr class="memdesc:aae58d421bc5e403c763fa4cf0885e80d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getters. <br /></td></tr>
<tr class="separator:aae58d421bc5e403c763fa4cf0885e80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebaa8b82a0e0648497a456d328abeaea"><td class="memItemLeft" align="right" valign="top"><a id="aebaa8b82a0e0648497a456d328abeaea" name="aebaa8b82a0e0648497a456d328abeaea"></a>
const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getContractAddress</b> () const</td></tr>
<tr class="separator:aebaa8b82a0e0648497a456d328abeaea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289db0c3d2cf956a5b23d8da286daa57"><td class="memItemLeft" align="right" valign="top"><a id="a289db0c3d2cf956a5b23d8da286daa57" name="a289db0c3d2cf956a5b23d8da286daa57"></a>
const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getContractCreator</b> () const</td></tr>
<tr class="separator:a289db0c3d2cf956a5b23d8da286daa57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c822bb829fe7105a64ef258674b5d7"><td class="memItemLeft" align="right" valign="top"><a id="aa7c822bb829fe7105a64ef258674b5d7" name="aa7c822bb829fe7105a64ef258674b5d7"></a>
const uint64_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getContractChainId</b> () const</td></tr>
<tr class="separator:aa7c822bb829fe7105a64ef258674b5d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3312a8f3f4d532273bef43b967ae0b28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classContract.html#a3312a8f3f4d532273bef43b967ae0b28">registerFunction</a> (const std::string &amp;functor, std::function&lt; void(const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)&gt; f)</td></tr>
<tr class="memdesc:a3312a8f3f4d532273bef43b967ae0b28"><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO: eth_call from another contract.  <a href="classContract.html#a3312a8f3f4d532273bef43b967ae0b28">More...</a><br /></td></tr>
<tr class="separator:a3312a8f3f4d532273bef43b967ae0b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd1a40dfd91f74dd44af003a4c0e44b"><td class="memItemLeft" align="right" valign="top"><a id="a3dd1a40dfd91f74dd44af003a4c0e44b" name="a3dd1a40dfd91f74dd44af003a4c0e44b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>registerPayableFunction</b> (const std::string &amp;functor, std::function&lt; void(const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)&gt; f)</td></tr>
<tr class="separator:a3dd1a40dfd91f74dd44af003a4c0e44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740b51e5ccba3bbdcaff7ad11641ad3a"><td class="memItemLeft" align="right" valign="top"><a id="a740b51e5ccba3bbdcaff7ad11641ad3a" name="a740b51e5ccba3bbdcaff7ad11641ad3a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>registerViewFunction</b> (const std::string &amp;functor, std::function&lt; std::string(const std::string &amp;str)&gt; f)</td></tr>
<tr class="separator:a740b51e5ccba3bbdcaff7ad11641ad3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd42542e882049822ec26f809609300"><td class="memItemLeft" align="right" valign="top"><a id="acbd42542e882049822ec26f809609300" name="acbd42542e882049822ec26f809609300"></a>
const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getOrigin</b> () const</td></tr>
<tr class="separator:acbd42542e882049822ec26f809609300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066dd675ee112af518f9a273b8c996a6"><td class="memItemLeft" align="right" valign="top"><a id="a066dd675ee112af518f9a273b8c996a6" name="a066dd675ee112af518f9a273b8c996a6"></a>
const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getCaller</b> () const</td></tr>
<tr class="separator:a066dd675ee112af518f9a273b8c996a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d30fce9303d9e109780ee8e3e5f946"><td class="memItemLeft" align="right" valign="top"><a id="a78d30fce9303d9e109780ee8e3e5f946" name="a78d30fce9303d9e109780ee8e3e5f946"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>registerContractFunctions</b> ()</td></tr>
<tr class="separator:a78d30fce9303d9e109780ee8e3e5f946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dae7a4cca3ac26bd8e990f877280f00"><td class="memItemLeft" align="right" valign="top"><a id="a5dae7a4cca3ac26bd8e990f877280f00" name="a5dae7a4cca3ac26bd8e990f877280f00"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateState</b> (bool commit)</td></tr>
<tr class="memdesc:a5dae7a4cca3ac26bd8e990f877280f00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the variables that were used by the contract Called by ethCall functions and contract constructors. <br /></td></tr>
<tr class="separator:a5dae7a4cca3ac26bd8e990f877280f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a75d178038d2102c73ef5d9d1c8fa2bec"><td class="memItemLeft" align="right" valign="top"><a id="a75d178038d2102c73ef5d9d1c8fa2bec" name="a75d178038d2102c73ef5d9d1c8fa2bec"></a>
const std::unique_ptr&lt; <a class="el" href="classDB.html">DB</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>db</b></td></tr>
<tr class="memdesc:a75d178038d2102c73ef5d9d1c8fa2bec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the <a class="el" href="classDB.html" title="Abstraction of a LevelDB database.">DB</a> where the contract stored deployed. <br /></td></tr>
<tr class="separator:a75d178038d2102c73ef5d9d1c8fa2bec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab876029ceba09521dcd528df07d56539"><td class="memItemLeft" align="right" valign="top"><a id="ab876029ceba09521dcd528df07d56539" name="ab876029ceba09521dcd528df07d56539"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>registerVariableUse</b> (<a class="el" href="classSafeBase.html">SafeBase</a> &amp;variable)</td></tr>
<tr class="separator:ab876029ceba09521dcd528df07d56539"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7e5ede4f1a7d02d7592fa1bedf20afdc"><td class="memItemLeft" align="right" valign="top"><a id="a7e5ede4f1a7d02d7592fa1bedf20afdc" name="a7e5ede4f1a7d02d7592fa1bedf20afdc"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>contractName</b></td></tr>
<tr class="memdesc:a7e5ede4f1a7d02d7592fa1bedf20afdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the contract, used to identify the <a class="el" href="classContract.html" title="Native abstraction of a smart contract.">Contract</a> Class. <br /></td></tr>
<tr class="separator:a7e5ede4f1a7d02d7592fa1bedf20afdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280cd4d97efbe85d3ed73e461acc87c1"><td class="memItemLeft" align="right" valign="top"><a id="a280cd4d97efbe85d3ed73e461acc87c1" name="a280cd4d97efbe85d3ed73e461acc87c1"></a>
<a class="el" href="classAddress.html">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><b>contractAddress</b></td></tr>
<tr class="memdesc:a280cd4d97efbe85d3ed73e461acc87c1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classAddress.html" title="Abstraction for a single 20-byte address (e.g. &quot;1234567890abcdef...&quot;). Inherits FixedStr&lt;20&gt;.">Address</a> where the contract is deployed. <br /></td></tr>
<tr class="separator:a280cd4d97efbe85d3ed73e461acc87c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c038409a88a9126a37a4716475c84a"><td class="memItemLeft" align="right" valign="top"><a id="a87c038409a88a9126a37a4716475c84a" name="a87c038409a88a9126a37a4716475c84a"></a>
<a class="el" href="classAddress.html">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><b>contractCreator</b></td></tr>
<tr class="memdesc:a87c038409a88a9126a37a4716475c84a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classAddress.html" title="Abstraction for a single 20-byte address (e.g. &quot;1234567890abcdef...&quot;). Inherits FixedStr&lt;20&gt;.">Address</a> of the creator of the contract. <br /></td></tr>
<tr class="separator:a87c038409a88a9126a37a4716475c84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8609b15b7211176e573358c5009d2ce8"><td class="memItemLeft" align="right" valign="top"><a id="a8609b15b7211176e573358c5009d2ce8" name="a8609b15b7211176e573358c5009d2ce8"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>contractChainId</b></td></tr>
<tr class="memdesc:a8609b15b7211176e573358c5009d2ce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chain where the contract is deployed. <br /></td></tr>
<tr class="separator:a8609b15b7211176e573358c5009d2ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292dbcaa9973ab0f79ac7a60c80206f4"><td class="memItemLeft" align="right" valign="top"><a id="a292dbcaa9973ab0f79ac7a60c80206f4" name="a292dbcaa9973ab0f79ac7a60c80206f4"></a>
std::unordered_map&lt; std::string, std::function&lt; void(const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>functions</b></td></tr>
<tr class="separator:a292dbcaa9973ab0f79ac7a60c80206f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ee38e53662f80e0d42cffe36213f32"><td class="memItemLeft" align="right" valign="top"><a id="a97ee38e53662f80e0d42cffe36213f32" name="a97ee38e53662f80e0d42cffe36213f32"></a>
std::unordered_map&lt; std::string, std::function&lt; void(const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>payableFunctions</b></td></tr>
<tr class="separator:a97ee38e53662f80e0d42cffe36213f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6f413cf6632df5eb9a43c8b901f91d"><td class="memItemLeft" align="right" valign="top"><a id="a5c6f413cf6632df5eb9a43c8b901f91d" name="a5c6f413cf6632df5eb9a43c8b901f91d"></a>
std::unordered_map&lt; std::string, std::function&lt; std::string(const std::string &amp;str)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>viewFunctions</b></td></tr>
<tr class="separator:a5c6f413cf6632df5eb9a43c8b901f91d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab953286e4b4ea1c8b5fba789c3425757"><td class="memItemLeft" align="right" valign="top"><a id="ab953286e4b4ea1c8b5fba789c3425757" name="ab953286e4b4ea1c8b5fba789c3425757"></a>
<a class="el" href="classAddress.html">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><b>origin</b></td></tr>
<tr class="separator:ab953286e4b4ea1c8b5fba789c3425757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ce689de5203c7451efca095e5724be"><td class="memItemLeft" align="right" valign="top"><a id="a06ce689de5203c7451efca095e5724be" name="a06ce689de5203c7451efca095e5724be"></a>
<a class="el" href="classAddress.html">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><b>caller</b></td></tr>
<tr class="memdesc:a06ce689de5203c7451efca095e5724be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Who called the contract. <br /></td></tr>
<tr class="separator:a06ce689de5203c7451efca095e5724be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5e050705c6b88e5e33cc48e42fb3f61"><td class="memItemLeft" align="right" valign="top"><a id="ac5e050705c6b88e5e33cc48e42fb3f61" name="ac5e050705c6b88e5e33cc48e42fb3f61"></a>
uint256_t&#160;</td><td class="memItemRight" valign="bottom"><b>value</b></td></tr>
<tr class="memdesc:ac5e050705c6b88e5e33cc48e42fb3f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Who sent the tx. <br /></td></tr>
<tr class="separator:ac5e050705c6b88e5e33cc48e42fb3f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e77bdc40157a359197c3b3662295bb"><td class="memItemLeft" align="right" valign="top"><a id="a66e77bdc40157a359197c3b3662295bb" name="a66e77bdc40157a359197c3b3662295bb"></a>
std::vector&lt; std::reference_wrapper&lt; <a class="el" href="classSafeBase.html">SafeBase</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>usedVariables</b></td></tr>
<tr class="memdesc:a66e77bdc40157a359197c3b3662295bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value sent with the tx. <br /></td></tr>
<tr class="separator:a66e77bdc40157a359197c3b3662295bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aa28946e16e8d0fea401b6ceea921bf4f"><td class="memItemLeft" align="right" valign="top"><a id="aa28946e16e8d0fea401b6ceea921bf4f" name="aa28946e16e8d0fea401b6ceea921bf4f"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>ContractManager</b></td></tr>
<tr class="separator:aa28946e16e8d0fea401b6ceea921bf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61deeeb347c41435ebd211e4ac9c7c5d"><td class="memItemLeft" align="right" valign="top"><a id="a61deeeb347c41435ebd211e4ac9c7c5d" name="a61deeeb347c41435ebd211e4ac9c7c5d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>registerVariableUse</b> (<a class="el" href="classContract.html">Contract</a> &amp;contract, <a class="el" href="classSafeBase.html">SafeBase</a> &amp;variable)</td></tr>
<tr class="memdesc:a61deeeb347c41435ebd211e4ac9c7c5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Friend. <br /></td></tr>
<tr class="separator:a61deeeb347c41435ebd211e4ac9c7c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classContractGlobals"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classContractGlobals')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classContractGlobals.html">ContractGlobals</a></td></tr>
<tr class="memitem:ad47c4dbe57a6062f0b9ba98297c5b44e inherit pub_static_methods_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="ad47c4dbe57a6062f0b9ba98297c5b44e" name="ad47c4dbe57a6062f0b9ba98297c5b44e"></a>
static const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getCoinbase</b> ()</td></tr>
<tr class="memdesc:ad47c4dbe57a6062f0b9ba98297c5b44e inherit pub_static_methods_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for <code>coinbase</code>. <br /></td></tr>
<tr class="separator:ad47c4dbe57a6062f0b9ba98297c5b44e inherit pub_static_methods_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ed11ac830126364d833d2399c32a17 inherit pub_static_methods_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="a77ed11ac830126364d833d2399c32a17" name="a77ed11ac830126364d833d2399c32a17"></a>
static const uint256_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getBlockHeight</b> ()</td></tr>
<tr class="memdesc:a77ed11ac830126364d833d2399c32a17 inherit pub_static_methods_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for <code>blockHeight</code>. <br /></td></tr>
<tr class="separator:a77ed11ac830126364d833d2399c32a17 inherit pub_static_methods_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af8bd537ebb1601f73f20c8ad980900 inherit pub_static_methods_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="a9af8bd537ebb1601f73f20c8ad980900" name="a9af8bd537ebb1601f73f20c8ad980900"></a>
static const uint256_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getBlockTimestamp</b> ()</td></tr>
<tr class="memdesc:a9af8bd537ebb1601f73f20c8ad980900 inherit pub_static_methods_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for <code>blockTimestamp</code>. <br /></td></tr>
<tr class="separator:a9af8bd537ebb1601f73f20c8ad980900 inherit pub_static_methods_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classContractGlobals"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classContractGlobals')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classContractGlobals.html">ContractGlobals</a></td></tr>
<tr class="memitem:a04f6632d4fc015c2a7cb613605604ebd inherit pub_attribs_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="a04f6632d4fc015c2a7cb613605604ebd" name="a04f6632d4fc015c2a7cb613605604ebd"></a>
friend&#160;</td><td class="memItemRight" valign="bottom"><b>State</b></td></tr>
<tr class="separator:a04f6632d4fc015c2a7cb613605604ebd inherit pub_attribs_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_classContractGlobals"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_classContractGlobals')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classContractGlobals.html">ContractGlobals</a></td></tr>
<tr class="memitem:ad90b5cababe82c9b8def01b2da874df8 inherit pro_static_attribs_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="ad90b5cababe82c9b8def01b2da874df8" name="ad90b5cababe82c9b8def01b2da874df8"></a>
static <a class="el" href="classAddress.html">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><b>coinbase</b></td></tr>
<tr class="memdesc:ad90b5cababe82c9b8def01b2da874df8 inherit pro_static_attribs_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coinbase address (creator of current block). <br /></td></tr>
<tr class="separator:ad90b5cababe82c9b8def01b2da874df8 inherit pro_static_attribs_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a56c2e377cf23105b3951e48b65f786 inherit pro_static_attribs_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="a7a56c2e377cf23105b3951e48b65f786" name="a7a56c2e377cf23105b3951e48b65f786"></a>
static uint256_t&#160;</td><td class="memItemRight" valign="bottom"><b>blockHeight</b></td></tr>
<tr class="memdesc:a7a56c2e377cf23105b3951e48b65f786 inherit pro_static_attribs_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current block height. <br /></td></tr>
<tr class="separator:a7a56c2e377cf23105b3951e48b65f786 inherit pro_static_attribs_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bce3987d90877608fe1aaeaf8aee86f inherit pro_static_attribs_classContractGlobals"><td class="memItemLeft" align="right" valign="top"><a id="a9bce3987d90877608fe1aaeaf8aee86f" name="a9bce3987d90877608fe1aaeaf8aee86f"></a>
static uint256_t&#160;</td><td class="memItemRight" valign="bottom"><b>blockTimestamp</b></td></tr>
<tr class="memdesc:a9bce3987d90877608fe1aaeaf8aee86f inherit pro_static_attribs_classContractGlobals"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current block timestamp. <br /></td></tr>
<tr class="separator:a9bce3987d90877608fe1aaeaf8aee86f inherit pro_static_attribs_classContractGlobals"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Native abstraction of a smart contract. </p>
<p >All contracts have to inherit this class. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9900fa7ca93b402bf3caf140a47dd4b6" name="a9900fa7ca93b402bf3caf140a47dd4b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9900fa7ca93b402bf3caf140a47dd4b6">&#9670;&nbsp;</a></span>Contract() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Contract::Contract </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>contractName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td>
          <td class="paramname"><em>creator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t &amp;&#160;</td>
          <td class="paramname"><em>chainId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unique_ptr&lt; <a class="el" href="classDB.html">DB</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>db</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The address where the contract will be deployed. </td></tr>
    <tr><td class="paramname">chainId</td><td>The chain where the contract wil be deployed. </td></tr>
    <tr><td class="paramname">contractManager</td><td>Pointer to the contract manager. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac98cd9ff4e8f9530e3af6ad662e25794" name="ac98cd9ff4e8f9530e3af6ad662e25794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac98cd9ff4e8f9530e3af6ad662e25794">&#9670;&nbsp;</a></span>Contract() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Contract::Contract </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAddress.html">Address</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unique_ptr&lt; <a class="el" href="classDB.html">DB</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>db</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a93a9e7c057ddcb38a7839c6df98753b5" name="a93a9e7c057ddcb38a7839c6df98753b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93a9e7c057ddcb38a7839c6df98753b5">&#9670;&nbsp;</a></span>ethCall() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::string Contract::ethCall </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classContractManager.html#a3484d35ffb62a66e92d39abec2f17417">ContractManager</a>.</p>

</div>
</div>
<a id="aef97e051e844e0a4f0f961642510babc" name="aef97e051e844e0a4f0f961642510babc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef97e051e844e0a4f0f961642510babc">&#9670;&nbsp;</a></span>ethCall() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Contract::ethCall </td>
          <td>(</td>
          <td class="paramtype">const std::tuple&lt; <a class="el" href="classAddress.html">Address</a>, <a class="el" href="classAddress.html">Address</a>, uint64_t, uint256_t, uint256_t, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>callInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke a contract function and simulate it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callInfo</td><td>callInfo: tuple of (from, to, gasLimit, gasPrice, value, data) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classContractManager.html#afc211ae5ab8a24d96dce2d1feddba5c0">ContractManager</a>.</p>

</div>
</div>
<a id="a7b4e99ce117417be96c23a135996666c" name="a7b4e99ce117417be96c23a135996666c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b4e99ce117417be96c23a135996666c">&#9670;&nbsp;</a></span>ethCall() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Contract::ethCall </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke a contract function using a transaction. </p>
<p >Used by the State class when calling <code>processNewBlock()/validateNewBlock()</code>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx</td><td>The transaction to use for call. </td></tr>
    <tr><td class="paramname">commit</td><td>Whether to commit the changes to the SafeVariables or just simulate the transaction. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classContractManager.html#aec1dfa6e5cb6d38105344d5b61e6a124">ContractManager</a>.</p>

</div>
</div>
<a id="a9c9e36a06ff44ac0db8aedf33ca16d8a" name="a9c9e36a06ff44ac0db8aedf33ca16d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c9e36a06ff44ac0db8aedf33ca16d8a">&#9670;&nbsp;</a></span>ethCall() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Contract::ethCall </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint256_t &amp;&#160;</td>
          <td class="paramname"><em>txValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke a contract "payable" function using a transaction Used by the <a class="el" href="classState.html" title="Abstraction of the blockchain&#39;s state.">State</a> class when calling <code>processNewBlock()/validateNewBlock()</code> Can be overridden by child class if they need need to process the function call in a non-standard way (See <a class="el" href="classContractManager.html" title="Class that holds all current contract instances in the blockchain state.">ContractManager</a> for example) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx</td><td>the Transaction to use for call </td></tr>
    <tr><td class="paramname">account</td><td>Reference back to the account within the <a class="el" href="classState.html" title="Abstraction of the blockchain&#39;s state.">State</a> class. </td></tr>
    <tr><td class="paramname">commit</td><td>Whether to commit the changes to the SafeVariables or just simulate the transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3312a8f3f4d532273bef43b967ae0b28" name="a3312a8f3f4d532273bef43b967ae0b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3312a8f3f4d532273bef43b967ae0b28">&#9670;&nbsp;</a></span>registerFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Contract::registerFunction </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>functor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(const <a class="el" href="classTxBlock.html">TxBlock</a> &amp;tx)&gt;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TODO: eth_call from another contract. </p>
<p >Register by using function name + lambda. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/contract/<a class="el" href="contract_8h_source.html">contract.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
